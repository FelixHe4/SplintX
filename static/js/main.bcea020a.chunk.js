(this.webpackJsonpsplinternmarket=this.webpackJsonpsplinternmarket||[]).push([[0],[,,,,,,,,,function(e,t,a){e.exports=a(33)},,,,,function(e,t,a){},function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),s=a.n(l),i=(a(14),a(2)),c=a(3),o=a(1),m=a(5),d=a(4);a(15),a(16),a(17),a(18);var u=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={loggedIn:!!localStorage.getItem("username"),username:""},n.handleUsernameChange=n.handleUsernameChange.bind(Object(o.a)(n)),n.handleLogin=n.handleLogin.bind(Object(o.a)(n)),n.handleLogout=n.handleLogout.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"handleLogin",value:function(){var e=this.state.username,t=e+Date.now();window.hive_keychain?window.hive_keychain.requestSignBuffer(e,t,"Posting",function(t){if(t.success){var a=document.getElementById("loginModal-success-toast");a.className="show",setTimeout((function(){a.className=a.className.replace("show","")}),3e3),localStorage.setItem("username",e),this.props.login(e),this.setState({loggedIn:!0})}else{var n=document.getElementById("loginModal-fail-toast");n.className="show",setTimeout((function(){n.className=n.className.replace("show","")}),3e3)}}.bind(this)):alert("Please get Hive Keychain to login to SplintX")}},{key:"handleLogout",value:function(){localStorage.removeItem("username"),this.setState({loggedIn:!1}),this.props.login("")}},{key:"render",value:function(){return r.a.createElement("div",{className:"loginModal"},r.a.createElement("div",{className:"loginModal-overlay",onClick:this.props.closeModal}),r.a.createElement("div",{className:"loginModal-content"},r.a.createElement("div",{className:"loginModal-exit",onClick:this.props.closeModal},r.a.createElement("i",{className:"fas fa-times"})),this.state.loggedIn?r.a.createElement("div",null,r.a.createElement("h2",null,"Hi ",localStorage.getItem("username"),"!"),r.a.createElement("h4",null,"You're logged in to SplintX")):r.a.createElement("div",null,r.a.createElement("h2",null,"Login to SplintX"),r.a.createElement("h4",null,"with Hive Keychain")),r.a.createElement("div",{id:"lockIcon"},this.state.loggedIn?r.a.createElement("i",{className:"fas fa-unlock loginModal-unlock-icon"}):r.a.createElement("i",{className:"fas fa-lock loginModal-lock-icon"})),this.state.loggedIn?r.a.createElement("button",{onClick:this.handleLogout},"Logout"):r.a.createElement("div",null,r.a.createElement("input",{placeholder:"Username",className:"loginModal-username",onChange:this.handleUsernameChange}),r.a.createElement("button",{disabled:""===this.state.username,onClick:this.handleLogin},"Login"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"Don't have Hive Keychain? Get it ",r.a.createElement("a",{href:"https://chrome.google.com/webstore/detail/hive-keychain/jcacnejopjdphbnjgfaaobbfafkihpep"},"here"),"."))),r.a.createElement("div",{id:"loginModal-success-toast"},r.a.createElement("i",{className:"fas fa-check"}),"Successfully Logged In!"),r.a.createElement("div",{id:"loginModal-fail-toast"},r.a.createElement("i",{className:"fas fa-times"}),"Please check your username and try again."))}}]),a}(r.a.Component),h={market:"Market",collection:"My Collection"},p=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={renderLogin:!1},n.openSidebar=n.openSidebar.bind(Object(o.a)(n)),n.closeSidebar=n.closeSidebar.bind(Object(o.a)(n)),n.toggleLogin=n.toggleLogin.bind(Object(o.a)(n)),n.handleLogout=n.handleLogout.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"openSidebar",value:function(){document.getElementById("navSidebar").className="nav-sidebar show-sidebar",document.getElementById("sidebarOverlay").style.display="block"}},{key:"closeSidebar",value:function(){document.getElementById("navSidebar").className="nav-sidebar hide-sidebar",document.getElementById("sidebarOverlay").style.display="none"}},{key:"toggleLogin",value:function(){this.setState({renderLogin:!this.state.renderLogin})}},{key:"handleLogout",value:function(){var e=document.getElementById("navbar-logout-toast");e.className="show",setTimeout((function(){e.className=e.className.replace("show","")}),3e3),localStorage.removeItem("username"),this.setState({loggedIn:!1}),this.props.login("")}},{key:"render",value:function(){var e=this;return r.a.createElement("nav",{className:"navbar",id:"test"},r.a.createElement("div",{className:"navbar-title",href:""},"Splint",r.a.createElement("span",{className:"navbar-x-accent"},"X")),r.a.createElement("div",{className:"navbar-links-container"},r.a.createElement("ul",{className:""},Object.keys(h).map((function(t){var a="nav-item";return t===e.props.active&&(a+=" active"),r.a.createElement("li",{className:a},r.a.createElement("a",{className:"nav-link",onClick:function(){e.props.updatePage(t)}},h[t]))})),this.props.loggedIn?r.a.createElement("div",{className:"login-btn nav-item",onClick:this.handleLogout},"Logout"):r.a.createElement("div",{className:"login-btn nav-item",onClick:this.toggleLogin},"Login"),r.a.createElement("div",{className:"bars-btn nav-item-small",onClick:this.openSidebar},r.a.createElement("i",{className:"fas fa-bars"}))),r.a.createElement("div",{className:"sidebar-overlay",style:{display:"none"},onClick:this.closeSidebar,id:"sidebarOverlay"}),r.a.createElement("div",{className:"nav-sidebar hide-sidebar",id:"navSidebar"},r.a.createElement("div",{className:"exit-btn",onClick:this.closeSidebar},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("ul",{className:"nav-sidebar-container"},Object.keys(h).map((function(t){return r.a.createElement("li",{className:"nav-item-side"},r.a.createElement("a",{className:"nav-link",onClick:function(){e.closeSidebar(),e.props.updatePage(t)}},h[t].toUpperCase()))})),this.props.loggedIn?r.a.createElement("li",{className:"nav-item-side login-side",onClick:this.handleLogout},"LOGOUT"):r.a.createElement("li",{className:"nav-item-side login-side",onClick:this.toggleLogin},"LOGIN")))),this.state.renderLogin?r.a.createElement(u,{login:this.props.login,closeModal:this.toggleLogin}):"",r.a.createElement("div",{id:"navbar-logout-toast"},r.a.createElement("i",{className:"fas fa-check"}),"Successfully Logged Out!"))}}]),a}(r.a.Component),g=(a(19),a(20),{gold:["Show Gold Cards"],type:["Monster","Summoner"],rarity:["Common","Rare","Epic","Legendary"],edition:["Alpha","Beta","Promo","Reward","Untamed"],element:["Fire","Water","Earth","Life","Death","Dragon","Neutral"]}),v=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={activeFilters:[]},n.getCategory=n.getCategory.bind(Object(o.a)(n)),n.handleSearchChange=n.handleSearchChange.bind(Object(o.a)(n)),n.clearFilters=n.clearFilters.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"getCategory",value:function(e){var t="";return Object.keys(g).map((function(a){g[a].includes(e)&&(t=a)})),t}},{key:"handleSearchChange",value:function(e){var t=e.target.value;this.props.updateFilters(t,"search")}},{key:"clearFilters",value:function(){this.setState({activeFilters:[]}),this.props.updateFilters(null,null,"clear")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.mobileFilters?"collection-filter-pane show-sidebar":"collection-filter-pane hide-sidebar"},r.a.createElement("div",{className:"exit-btn",onClick:this.props.hideMobileFilters},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("input",{className:"collection-filter-search",placeholder:"Search Cards",onChange:this.handleSearchChange}),r.a.createElement("h2",{className:"collection-filter-header"},"Filters"),r.a.createElement("div",{className:"collection-activeFilters-container"},this.state.activeFilters.map((function(t){return r.a.createElement("p",{className:"collection-activeFilter",onClick:function(){for(var a=e.state.activeFilters,n=0;n<a.length;n++)if(a[n]===t){a.splice(n,1),e.setState({activeFilters:a});break}e.props.updateFilters(t,e.getCategory(t),"remove")}},t," \u2a2f")}))),0!==this.state.activeFilters.length?r.a.createElement("p",{className:"collection-clearFilters",onClick:this.clearFilters},"Clear Filters"):"",Object.keys(g).map((function(t){return r.a.createElement("div",{className:"collection-filter-section"},r.a.createElement("h2",{className:"collection-filter-section-header"},t.toUpperCase()),g[t].map((function(a){var n=t+"-icon";return"rarity"===t?n+=" fas fa-circle "+a.toLowerCase():"element"===t?(n+=" "+a.toLowerCase()+" fas ",n+="Fire"===a?"fa-fire":"Water"===a?"fa-tint":"Earth"===a?"fa-leaf":"Life"===a?"fa-star-of-life":"Death"===a?"fa-skull":"Dragon"===a?"fa-dragon":"fa-dumbbell"):"gold"===t&&(n+=" fas fa-star"),r.a.createElement("p",{className:"collection-filter-selection",id:a,onClick:function(){var n=e.state.activeFilters;n.includes(a)||(n.push(a),e.setState({activeFilters:n}),e.props.updateFilters(a,t,"add"))}},r.a.createElement("i",{className:n},"edition"===t||"type"===t?a.substring(0,1).toUpperCase():""),a)})))})))}}]),a}(r.a.Component),f=(a(21),a(22),a(23),a(6)),E=a.n(f),b=[[20,60,160,360,760,1560,2560,4560,7560],[100,300,700,1500,2500,4500,8500],[250,750,1750,3750,7750],[1e3,3e3,7e3]],y=[[1,5,14,30,60,100,150,220,300,400],[1,5,14,25,40,60,85,115],[1,4,10,20,32,46],[1,3,6,11]],C=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={forSale:[],selected:[],sortMethod:"default",loading:!0},n.updateSort=n.updateSort.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"updateSort",value:function(e){var t=this.state.forSale;"priceAsc"===e?t.sort((function(e,t){return Number(e.buy_price)-Number(t.buy_price)})):"priceDec"===e?t.sort((function(e,t){return Number(t.buy_price)-Number(e.buy_price)})):"lvlAsc"===e?t.sort((function(e,t){return Number(e.lvl)-Number(t.lvl)})):"lvlDec"===e&&t.sort((function(e,t){return Number(t.lvl)-Number(e.lvl)})),this.setState({sortMethod:e})}},{key:"componentDidMount",value:function(){var e="https://game-api.splinterlands.io/market/for_sale_by_card?";e+="card_detail_id="+this.props.info.detailID+("&gold="+this.props.info.gold)+("&edition="+("Alpha"===this.props.info.edition?"0":"Beta"===this.props.info.edition?"1":"Promo"===this.props.info.edition?"2":"Reward"===this.props.info.edition?"3":"4")),E.a.ajax({type:"GET",url:e,jsonpCallback:"testing",dataType:"json",success:function(e){var t=this;this.setState({forSale:e.map((function(e){for(var a="Common"===t.props.info.rarity?1:"Rare"===t.props.info.rarity?2:"Epic"===t.props.info.rarity?3:4,n=t.props.info.edition,r=t.props.info.detailID,l=1,s="Untamed"===n||"Reward"===n&&r>=225?y:b,i="Untamed"===n||"Reward"===n&&r>=225?1:2,c=s[a-1].length-1;c>=0;c--)if(e.xp>=s[a-1][c]){l=c+i;break}return{seller:e.seller,uid:e.uid,buy_price:e.buy_price,lvl:l,currency:e.currency,market_id:e.market_id,name:t.props.info.name}})),loading:!1})}.bind(this),error:function(e){console.log("There was an error retrieving the sale data.")}})}},{key:"render",value:function(){var e=this,t=this.props.cart.map((function(e){return e.uid}));return r.a.createElement("div",{className:"market-cardModal"},r.a.createElement("div",{className:"market-cardModal-overlay",onClick:this.props.closeModal}),r.a.createElement("div",{className:"market-cardModal-content"},r.a.createElement("div",{className:"market-cardModal-exit",onClick:this.props.closeModal},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("h2",null,this.props.info.name),r.a.createElement("div",{className:"market-cardModal-img-container"},r.a.createElement("img",{className:"market-cardModal-img",src:this.props.info.img})),r.a.createElement("div",{className:"market-cardModal-info-container"},r.a.createElement("h3",null,"Cards For Sale"),r.a.createElement("div",{className:"market-cardModal-table-container"},r.a.createElement("table",{className:"market-cardModal-table"},r.a.createElement("thead",{className:"market-cardModal-table-header"},r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",{onClick:function(){"lvlDec"===e.state.sortMethod?e.updateSort("lvlAsc"):e.updateSort("lvlDec")},style:{cursor:"pointer"}},"Level ",r.a.createElement("i",{className:"market-cardModal-table-sortIcon "+("lvlAsc"===this.state.sortMethod?"fas fa-caret-up":"lvlDec"===this.state.sortMethod?"fas fa-caret-down":"")})),r.a.createElement("th",{onClick:function(){"priceAsc"===e.state.sortMethod?e.updateSort("priceDec"):e.updateSort("priceAsc")},style:{cursor:"pointer"}},"Price ",r.a.createElement("i",{className:"market-cardModal-table-sortIcon "+("priceAsc"===this.state.sortMethod?"fas fa-caret-up":"priceDec"===this.state.sortMethod?"fas fa-caret-down":"")})),r.a.createElement("th",null,"Seller"),r.a.createElement("th",null,"Card ID"))),this.state.loading?"":r.a.createElement("tbody",{className:"market-cardModal-table-data"},this.state.forSale.map((function(a){return r.a.createElement("tr",null,r.a.createElement("td",{className:"market-cardModal-table-add"},r.a.createElement("input",{type:"checkbox",onClick:function(){var t=e.state.selected;if(t.length>=45&&!t.includes(a)){var n=document.getElementById("market-cardModal-tooMany-toast");n.className="show",setTimeout((function(){n.className=n.className.replace("show","")}),3e3)}else if(t.includes(a))for(var r=0;r<t.length;r++)t[r].uid===a.uid&&t.splice(r,1);else t.push(a);e.setState({selected:t})},disabled:t.includes(a.uid),checked:e.state.selected.includes(a)})),r.a.createElement("td",{className:"market-cardModal-table-data-lvl"},a.lvl),r.a.createElement("td",{className:"market-cardModal-table-data-price"},Number(a.buy_price).toFixed(2)+" "+a.currency),r.a.createElement("td",{className:"market-cardModal-table-data-seller"},a.seller),r.a.createElement("td",{className:"market-cardModal-table-data-uid"},a.uid))})))),this.state.loading?r.a.createElement("div",{className:"loader-modal-container"},r.a.createElement("div",{className:"loader-modal"})):""),r.a.createElement("div",{className:"market-cardModal-addToCart"},r.a.createElement("span",null,this.state.selected.length," ",this.props.info.name," Card",1===this.state.selected.length?"":"s"," Selected, Total: $",function(e,t){for(var a=0,n=0;n<e.length;n++)a+=Number(e[n][t]);return a}(this.state.selected,"buy_price").toFixed(2)," USD"),r.a.createElement("button",{className:"market-cardModal-addToCart-btn",onClick:function(){var t=e.state.selected,a=document.getElementById("market-cardModal-toast");e.setState({selected:[]}),e.props.addToCart(t),a.className="show",setTimeout((function(){a.className=a.className.replace("show","")}),3e3)},disabled:0===this.state.selected.length},"Add to Cart")))),r.a.createElement("div",{id:"market-cardModal-toast"},r.a.createElement("i",{className:"fas fa-check"}),"Successfully added to cart!"),r.a.createElement("div",{id:"market-cardModal-tooMany-toast"},r.a.createElement("i",{className:"fas fa-times"}),"You have already selected the limit of 45 cards."))}}]),a}(r.a.Component),N=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={renderModal:!1},n.toggleModal=n.toggleModal.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"toggleModal",value:function(){this.setState({renderModal:!this.state.renderModal})}},{key:"render",value:function(){return r.a.createElement("div",{className:"card",id:this.props.info.distinctID},r.a.createElement("img",{className:"card-img",src:this.props.info.img,onClick:this.toggleModal}),r.a.createElement("div",{className:"card-qty"},this.props.info.qty),this.state.renderModal?r.a.createElement(C,{info:this.props.info,closeModal:this.toggleModal,cart:this.props.cart,addToCart:this.props.addToCart}):"")}}]),a}(r.a.Component),k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSortChange=n.handleSortChange.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleSortChange",value:function(e){var t=e.target.value;this.props.updateSort(t)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"marketList-container"},r.a.createElement("div",{className:"marketList-sort-container"},r.a.createElement("p",{className:"marketList-info"},r.a.createElement("span",{className:"marketList-resultCount"},this.props.cards.length," Results"),r.a.createElement("span",{className:"marketList-filterCount",onClick:this.props.showMobileFilters},0===this.props.filterCount?"Add Filters (0)":"Edit Filters ("+this.props.filterCount+")")),r.a.createElement("select",{className:"marketList-sort-input",onChange:this.handleSortChange,defaultValue:"default"},r.a.createElement("option",{disabled:!0,value:"default"},"Sort By:"),r.a.createElement("option",{value:"az"},"Name: A - Z"),r.a.createElement("option",{value:"za"},"Name: Z - A"),r.a.createElement("option",{value:"manaAsc"},"Mana: Low - High"),r.a.createElement("option",{value:"manaDes"},"Mana: High - Low"))),r.a.createElement("div",{className:"marketList"},this.props.loading?r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"})):0===this.props.cards.length?r.a.createElement("p",{className:"market-noCards"},"No cards were found. Please update the filters."):this.props.cards.map((function(t){return r.a.createElement(N,{info:t,cart:e.props.cart,addToCart:e.props.addToCart})}))))}}]),a}(r.a.Component),M=(a(24),function(e,t){for(var a=0,n=0;n<e.length;n++)a+=Number(e[n][t]);return a});var S=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).fillOrder=n.fillOrder.bind(Object(o.a)(n)),n.clearCart=n.clearCart.bind(Object(o.a)(n)),n.state={totalDEC:0,DECexchange:0,totalUSD:M(n.props.cart,"buy_price")},n}return Object(c.a)(a,[{key:"fillOrder",value:function(){if(localStorage.getItem("username")&&this.props.cart.length<=45){var e=JSON.stringify({items:this.props.cart.map((function(e){return e.market_id})),price:this.state.totalUSD,market:"splintx",currency:"USD",app:"splintXApp"});window.hive_keychain.requestCustomJson(localStorage.getItem("username"),"sm_market_purchase","Active",e,"Buy Card(s)",function(e){var t=document.getElementById("cart-purchased-toast");t.className="show",setTimeout((function(){t.className=t.className.replace("show","")}),3e3),this.setState({totalDEC:0,totalUSD:0}),this.props.clearCart()}.bind(this))}else if(this.props.cart.length>45){var t=document.getElementById("cart-tooMany-toast");t.className="show",setTimeout((function(){t.className=t.className.replace("show","")}),3e3)}else{var a=document.getElementById("cart-login-prompt-toast");a.className="show",setTimeout((function(){a.className=a.className.replace("show","")}),3e3)}}},{key:"clearCart",value:function(){this.setState({totalDEC:0,totalUSD:0}),this.props.clearCart()}},{key:"componentDidMount",value:function(){E.a.ajax({type:"GET",url:"https://game-api.splinterlands.com/settings",jsonpCallback:"testing",dataType:"json",success:function(e){var t=e.dec_price,a=this.state.totalUSD/t;this.setState({totalDEC:a,DECexchange:t})}.bind(this),error:function(e){console.log("There was an error retrieving the exchange rate")}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"cart"},r.a.createElement("div",{className:"cart-overlay",onClick:this.props.closeCart}),r.a.createElement("div",{className:"cart-content"},r.a.createElement("div",{className:"cart-exit",onClick:this.props.closeCart},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("h2",null,"My Cart"),r.a.createElement("p",null,"You have ",this.props.cart.length," item",1!==this.props.cart.length?"s":""," in your cart. ",r.a.createElement("span",{className:"cart-clear",onClick:this.clearCart},"Clear Cart")),r.a.createElement("div",{className:"cart-table-container"},r.a.createElement("table",{className:"cart-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Card Name"),r.a.createElement("th",null,"Card ID"),r.a.createElement("th",null,"Level"),r.a.createElement("th",null,"Price"),r.a.createElement("th",null))),r.a.createElement("tbody",null,this.props.cart.map((function(t){return r.a.createElement("tr",null,r.a.createElement("td",null,t.name),r.a.createElement("td",{style:{textAlign:"center"}},t.uid),r.a.createElement("td",{style:{textAlign:"center"}},t.lvl),r.a.createElement("td",{style:{textAlign:"right"}},"$ ",Number(t.buy_price).toFixed(2)+" "+t.currency),r.a.createElement("td",{className:"cart-remove-item",onClick:function(){e.setState({totalUSD:e.state.totalUSD-t.buy_price,totalDEC:(e.state.totalUSD-t.buy_price)/e.state.DECexchange}),e.props.removeItem(t)}},"Remove"))}))))),r.a.createElement("div",{className:"cart-summary"},r.a.createElement("p",null,"Total: $",this.state.totalUSD.toFixed(2)),r.a.createElement("button",{onClick:this.fillOrder,disabled:0===this.props.cart.length},"Checkout - ",this.state.totalDEC.toFixed(3)," DEC"))),r.a.createElement("div",{id:"cart-purchased-toast"},r.a.createElement("i",{className:"fas fa-check"}),"Successfully purchased!"),r.a.createElement("div",{id:"cart-login-prompt-toast"},r.a.createElement("i",{className:"fas fa-times"}),"Please login to make a purchase."),r.a.createElement("div",{id:"cart-tooMany-toast"},r.a.createElement("i",{className:"fas fa-times"}),"You have over 45 cards in your cart."))}}]),a}(r.a.Component),j=[],O=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),n=t.call(this,e),localStorage.getItem("cart")||localStorage.setItem("cart",JSON.stringify([])),n.state={filters:{search:[""],gold:!1,type:[],rarity:[],edition:[],element:[]},filterCount:0,cards:[],mobileFilters:!1,loading:!0,cart:JSON.parse(localStorage.getItem("cart")),renderCart:!1},n.updateFilters=n.updateFilters.bind(Object(o.a)(n)),n.updateSort=n.updateSort.bind(Object(o.a)(n)),n.showMobileFilters=n.showMobileFilters.bind(Object(o.a)(n)),n.hideMobileFilters=n.hideMobileFilters.bind(Object(o.a)(n)),n.addToCart=n.addToCart.bind(Object(o.a)(n)),n.removeItem=n.removeItem.bind(Object(o.a)(n)),n.toggleCart=n.toggleCart.bind(Object(o.a)(n)),n.clearCart=n.clearCart.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"updateFilters",value:function(e,t,a){var n=this.state.filters,r=this.state.filterCount;if("search"===t)n.search[0]=e;else if("gold"===t)n.gold=!n.gold,r=n.gold?r+1:r-1;else if("add"===a)n[t].push(e),r++;else if("remove"===a){for(var l=0;l<n[t].length;l++)n[t][l]===e&&n[t].splice(l,1);r--}else n={search:[""],gold:!1,type:[],rarity:[],edition:[],element:[]},r=0;var s=[];j.map((function(e){var t=!0,a=!0,r=!0,l=!0,i=!0,c=!0,o=n.rarity,m=n.edition,d=n.element,u=n.search[0],h=n.gold,p=n.type;0===o.length||o.includes(e.rarity)||(t=!1),0===m.length||m.includes(e.edition)||(a=!1),0===d.length||d.includes(e.element)||(r=!1),0!==u.length&&-1===e.name.toLowerCase().indexOf(u.toLowerCase())&&(l=!1),h&&!e.gold&&(i=!1),0===p.length||p.includes(e.type)||(c=!1),t&&a&&r&&l&&i&&c&&s.push(e)})),this.setState({filters:n,filterCount:r,cards:s})}},{key:"updateSort",value:function(e){var t=this.state.cards;"az"===e?t.sort((function(e,t){return e.name<t.name?-1:1})):"za"===e?t.sort((function(e,t){return e.name<t.name?1:-1})):"manaAsc"===e?t.sort((function(e,t){return e.mana-t.mana})):"manaDes"===e&&t.sort((function(e,t){return t.mana-e.mana})),this.setState({cards:t})}},{key:"showMobileFilters",value:function(){this.setState({mobileFilters:!0})}},{key:"hideMobileFilters",value:function(){this.setState({mobileFilters:!1})}},{key:"addToCart",value:function(e){var t=this.state.cart.concat(e);localStorage.setItem("cart",JSON.stringify(t)),this.setState({cart:t})}},{key:"removeItem",value:function(e){for(var t=this.state.cart,a=0;a<t.length;a++)e.uid===t[a].uid&&t.splice(a,1);localStorage.setItem("cart",JSON.stringify(t)),this.setState({cart:t})}},{key:"clearCart",value:function(){var e=[];localStorage.setItem("cart",JSON.stringify(e)),this.setState({cart:e})}},{key:"toggleCart",value:function(){this.setState({renderCart:!this.state.renderCart})}},{key:"componentDidMount",value:function(){E.a.ajax({type:"GET",url:"https://game-api.splinterlands.com/cards/get_details",jsonpCallback:"testing",dataType:"json",success:function(e){var t=[];E.a.ajax({type:"GET",url:"https://game-api.splinterlands.com/market/for_sale_grouped",jsonpCallback:"testing",dataType:"json",success:function(a){for(var n=0;n<a.length;n++){var r=a[n].card_detail_id,l=e[r-1],s=a[n].gold,i=0===a[n].edition?"Alpha":1===a[n].edition?"Beta":3===a[n].edition?"Reward":4===a[n].edition?"Untamed":"Promo",c=s?"G":"C"+a[n].edition+r,o=l.name,m=l.type,d=1===l.rarity?"Common":2===l.rarity?"Rare":3===l.rarity?"Epic":"Legendary",u="Red"===l.color?"Fire":"Blue"===l.color?"Water":"Green"===l.color?"Earth":"White"===l.color?"Life":"Black"===l.color?"Death":"Gold"===l.color?"Dragon":"Neutral",h=a[n].qty,p="https://d36mxiodymuqjm.cloudfront.net/cards_by_level/"+i.toLowerCase()+"/"+o.replace(" ","%20")+"_lv1";p+=s?"_gold.png":".png",t.push({name:o,rarity:d,edition:i,element:u,type:m,detailID:r,distinctID:c,gold:s,img:p,mana:l.stats.mana[0],qty:h})}this.setState({cards:t,loading:!1}),j=t}.bind(this),error:function(e){console.log("There was an error retrieving your cards.")}})}.bind(this),error:function(e){console.log("There was an error retrieving the card details")}})}},{key:"render",value:function(){return r.a.createElement("div",{id:"market"},r.a.createElement("div",{className:"market-header"},r.a.createElement("h2",null,"Market"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"market-container"},r.a.createElement(v,{updateFilters:this.updateFilters,mobileFilters:this.state.mobileFilters,hideMobileFilters:this.hideMobileFilters}),r.a.createElement(k,{cart:this.state.cart,addToCart:this.addToCart,cards:this.state.cards,loading:this.state.loading,updateSort:this.updateSort,filterCount:this.state.filterCount,showMobileFilters:this.showMobileFilters})),r.a.createElement("div",{className:"market-cart-btn",onClick:this.toggleCart},r.a.createElement("i",{className:"fas fa-shopping-cart"})),0!==this.state.cart.length?r.a.createElement("div",{className:"market-cart-count"},r.a.createElement("p",null,this.state.cart.length)):"",this.state.renderCart?r.a.createElement(S,{cart:this.state.cart,removeItem:this.removeItem,closeCart:this.toggleCart,clearCart:this.clearCart}):"")}}]),a}(r.a.Component),w=(a(25),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={totalPrice:n.props.item.price},n.updatePrice=n.updatePrice.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"updatePrice",value:function(e){var t=e.target.value;this.setState({totalPrice:t*this.props.item.price})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"item-modal",id:"untamedModal"},r.a.createElement("div",{className:"item-modal-content"},r.a.createElement("img",{src:this.props.item.img,className:"item-modal-img"}),r.a.createElement("div",{className:"close-modal",onClick:this.props.closeModal},"\u2716"),r.a.createElement("h2",null,"Buy ",this.props.item.name),r.a.createElement("span",{style:{marginRight:"10px"}},"Quantity:"),r.a.createElement("input",{type:"number",min:"1",onChange:this.updatePrice,style:{width:"100px",textAlign:"right"}}),r.a.createElement("div",{className:"buy-container"},r.a.createElement("span",null,r.a.createElement("strong",null,"Buy: ")),this.props.item.acceptedCurrencies.map((function(t){var a="buy-btn "+t+"-price";return r.a.createElement("span",{className:a},e.state.totalPrice.toLocaleString()," ",t)})))))}}]),a}(r.a.Component)),F=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={openModal:!1},n.toggleModal=n.toggleModal.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"toggleModal",value:function(){this.state.openModal?this.setState({openModal:!1}):this.setState({openModal:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"item-container",onClick:this.toggleModal},r.a.createElement("img",{src:this.props.item.img,className:"item-img"}),r.a.createElement("div",{className:"item-description"},r.a.createElement("h2",null,this.props.item.name),r.a.createElement("p",{className:"price"},this.props.item.price.toLocaleString()," ",this.props.item.acceptedCurrencies.map((function(t){return e.props.item.acceptedCurrencies.indexOf(t)===e.props.item.acceptedCurrencies.length-1?t.toUpperCase():t.toUpperCase()+"/"}))," PER PACK"),r.a.createElement("p",null,this.props.item.description))),this.state.openModal?r.a.createElement(w,{item:this.props.item,closeModal:this.toggleModal}):r.a.createElement("div",null))}}]),a}(r.a.Component),L=[{name:"Untamed Booster Pack",description:"Each pack contains 5 cards randomly selected from the UNTAMED set. Each pack is guaranteed to contain at least one RARE card or better.\n\n\t\tThe UNTAMED set features over 70 new cards, with 1.5 million packs available for sale.\n\n\t\tAirdrops: Every 100,000 packs sold will unlock a new card that will be airdropped to players who have already purchased packs and will be added to packs going forward.",price:2e3,acceptedCurrencies:["Credits","DEC"],img:"https://d36mxiodymuqjm.cloudfront.net/website/ui_elements/shop/logo_untamed.png"},{name:"Essence Orbs",description:"Each Orb contains 5 cards randomly selected from the WINDS OF CHANGE collection. Each Orb is guaranteed to contain at least one RARE card or better",price:2500,acceptedCurrencies:["DEC"],img:"https://d36mxiodymuqjm.cloudfront.net/website/ui_elements/shop/img_artifacts-dealer_brushed.png"}],I=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"packs"},r.a.createElement("h1",null,"Buy Packs and Items"),L.map((function(e){return r.a.createElement(F,{item:e})})))}}]),a}(r.a.Component),x=(a(26),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"stats-overview"},r.a.createElement("h3",null,"Overview"),r.a.createElement("div",{className:"overview-stat"},r.a.createElement("h4",null,this.props.stats.wins,"-",this.props.stats.losses),r.a.createElement("p",null,"W/L")),r.a.createElement("div",{className:"overview-stat"},r.a.createElement("h4",null,this.props.stats.streak),r.a.createElement("p",null,"STREAK")),r.a.createElement("div",{className:"overview-stat"},r.a.createElement("h4",null,this.props.stats.league),r.a.createElement("p",null,"LEAGUE")),r.a.createElement("div",{className:"overview-stat"},r.a.createElement("h4",null,this.props.stats.score),r.a.createElement("p",null,"SCORE")))}}]),a}(r.a.Component)),D=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"renderCards",value:function(){return"W"===this.props.battle.result?r.a.createElement("div",{className:"battle-cards"},r.a.createElement("div",{className:"own-cards win-cards"},this.props.battle.ownCards.map((function(e){var t="url("+e.img+")";return r.a.createElement("div",{className:"battle-card",style:{backgroundImage:t}})}))),r.a.createElement("div",{className:"vs"},"VS"),r.a.createElement("div",{className:"opponent-cards loss-cards"},this.props.battle.opponentCards.map((function(e){var t="url("+e.img+")";return r.a.createElement("div",{className:"battle-card",style:{backgroundImage:t}})})))):"L"===this.props.battle.result?r.a.createElement("div",{className:"battle-cards"},r.a.createElement("div",{className:"own-cards loss-cards"},this.props.battle.ownCards.map((function(e){var t="url("+e.img+")";return r.a.createElement("div",{className:"battle-card",style:{backgroundImage:t}})}))),r.a.createElement("div",{className:"vs"},"VS"),r.a.createElement("div",{className:"opponent-cards win-cards"},this.props.battle.opponentCards.map((function(e){var t="url("+e.img+")";return r.a.createElement("div",{className:"battle-card",style:{backgroundImage:t}})})))):void 0}},{key:"render",value:function(){return r.a.createElement("div",{className:"battle"},r.a.createElement("h4",null,"W"===this.props.battle.result?r.a.createElement("span",{className:"win"},"W"):r.a.createElement("span",{className:"loss"},"L")," vs ",this.props.battle.opponent),this.renderCards(),r.a.createElement("div",null,r.a.createElement("div",{className:"battle-stat"},r.a.createElement("p",null,"Duration: ",r.a.createElement("strong",null,this.props.battle.duration," Rounds"))),r.a.createElement("div",{className:"battle-stat"},r.a.createElement("p",null,"Earnings: ",r.a.createElement("strong",null,this.props.battle.earnings," DEC"))),r.a.createElement("div",{className:"battle-stat"},r.a.createElement("p",null,"Score change: ",r.a.createElement("strong",null,this.props.battle.scoreChange>0?"+":"",this.props.battle.scoreChange))),r.a.createElement("div",{className:"battle-stat"},r.a.createElement("p",null,this.props.battle.time))))}}]),a}(r.a.Component),_=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"battle-log"},r.a.createElement("h3",null,"Last 5 Battles"),this.props.battles.map((function(e){return r.a.createElement(D,{battle:e})})))}}]),a}(r.a.Component);E.a.ajax({type:"GET",url:"https://game-api.splinterlands.com/players/details?name=notswizz",jsonCallback:"testing",dataType:"json",success:function(e){var t=e.rating},error:function(e){console.log(e.message)}});var B=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{id:"battle-chain"},r.a.createElement("h1",null,"Battle Chain"),r.a.createElement("div",{style:{overflow:"auto"}},r.a.createElement("div",{className:"search-container"},r.a.createElement("input",{className:"search-input",placeholder:"Search Profiles"}),r.a.createElement("div",{className:"search-btn"},"Search"))),r.a.createElement("div",{className:"stats-container"},r.a.createElement("div",{className:"stats-header"},r.a.createElement("h2",{className:"stats-title"},"Statistics"),r.a.createElement("h3",{className:"username"},"@username")),r.a.createElement("hr",null),r.a.createElement(x,null),r.a.createElement(_,null)))}}]),a}(r.a.Component),A=(a(27),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).addScanner=n.addScanner.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"addScanner",value:function(){for(var e=document.getElementById("name").value,t=[],a=0;a<document.getElementsByClassName("elementCheck").length;a++)document.getElementsByClassName("elementCheck")[a].checked&&t.push(document.getElementsByClassName("elementCheck")[a].value);0===t.length&&t.push("All");for(var n=[],r=0;r<document.getElementsByClassName("rarityCheck").length;r++)document.getElementsByClassName("rarityCheck")[r].checked&&n.push(document.getElementsByClassName("rarityCheck")[r].value);0===n.length&&n.push("All");var l=0,s=10,i=0,c=1e5;document.getElementById("minMana").value&&(l=document.getElementById("minMana").value),document.getElementById("maxMana").value&&(s=document.getElementById("maxMana").value),document.getElementById("minPrice").value&&(i=document.getElementById("minPrice").value),document.getElementById("maxPrice").value&&(c=document.getElementById("maxPrice").value);var o={name:e,elements:t,rarity:n,manaMin:l,manaMax:s,priceMin:i,priceMax:c,alert:document.getElementById("alert").value};this.props.addScanner(o)}},{key:"render",value:function(){return r.a.createElement("div",{className:"add-scanner-modal"},r.a.createElement("div",{className:"add-scanner-content"},r.a.createElement("div",{className:"close-modal",onClick:this.props.closeModal},"\u2a2f"),r.a.createElement("h2",null,"New Market Scanner"),r.a.createElement("form",{className:"scanner-form"},r.a.createElement("div",{className:"scanner-col"},r.a.createElement("label",{for:"name"},"Name:"),r.a.createElement("br",null),r.a.createElement("input",{placeholder:"My New Scanner",id:"name",name:"name",required:!0}),r.a.createElement("br",null),r.a.createElement("div",{id:"elements"},r.a.createElement("label",{for:"elements"},"Elements:"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"fire",value:"Fire",className:"elementCheck"}),r.a.createElement("label",{for:"fire"},"Fire"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"water",value:"Water",className:"elementCheck"}),r.a.createElement("label",{for:"water"},"Water"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"earth",value:"Earth",className:"elementCheck"}),r.a.createElement("label",{for:"earth"},"Earth"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"life",value:"Life",className:"elementCheck"}),r.a.createElement("label",{for:"life"},"Life"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"death",value:"Death",className:"elementCheck"}),r.a.createElement("label",{for:"death"},"Death"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"dragon",value:"Dragon",className:"elementCheck"}),r.a.createElement("label",{for:"dragon"},"Dragon"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"normal",value:"Normal",className:"elementCheck"}),r.a.createElement("label",{for:"normal"},"Normal"),r.a.createElement("br",null))),r.a.createElement("div",{className:"scanner-col"},r.a.createElement("div",{id:"rarity"},r.a.createElement("label",{for:"rarity"},"Rarity:"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"common",value:"Common",className:"rarityCheck"}),r.a.createElement("label",{for:"common"},"Common"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"rare",value:"Rare",className:"rarityCheck"}),r.a.createElement("label",{for:"rare"},"Rare"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"epic",value:"Epic",className:"rarityCheck"}),r.a.createElement("label",{for:"epic"},"Epic"),r.a.createElement("br",null),r.a.createElement("input",{type:"checkbox",name:"legendary",value:"Legendary",className:"rarityCheck"}),r.a.createElement("label",{for:"legendary"},"Legendary"),r.a.createElement("br",null)),r.a.createElement("label",{for:"mana-range"},"Mana Range:"),r.a.createElement("br",null),r.a.createElement("input",{placeholder:"Min Mana",type:"number",id:"minMana"}),r.a.createElement("input",{placeholder:"Max Mana",type:"number",id:"maxMana"}),r.a.createElement("br",null),r.a.createElement("label",{for:"price-range"},"Price Range:"),r.a.createElement("br",null),r.a.createElement("input",{placeholder:"Min Price",type:"number",id:"minPrice"}),r.a.createElement("input",{placeholder:"Max Price",type:"number",id:"maxPrice"}),r.a.createElement("br",null),r.a.createElement("p",null,r.a.createElement("strong",null,"Alert me")," when cards drop ",r.a.createElement("input",{type:"number",min:"1",max:"100",id:"alert",required:!0})," % below market price")),r.a.createElement("div",{id:"submit",onClick:this.addScanner},"Add Scanner"))))}}]),a}(r.a.Component)),T=[{name:"Scanner1",elements:["Fire","Earth","Dragon"],rarity:["Rare","Epic","Legendary"],manaMin:0,manaMax:10,priceMin:0,priceMax:1e3,alert:15},{name:"Scanner2",elements:["Water","Earth"],rarity:["All"],manaMin:4,manaMax:10,priceMin:10,priceMax:1e3,alert:8}],P=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={scanners:T,renderModal:!1},n.renderModal=n.renderModal.bind(Object(o.a)(n)),n.closeModal=n.closeModal.bind(Object(o.a)(n)),n.addScanner=n.addScanner.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"renderModal",value:function(){this.setState({renderModal:!0})}},{key:"closeModal",value:function(){this.setState({renderModal:!1})}},{key:"addScanner",value:function(e){T.push(e),this.setState({scanners:T,renderModal:!1})}},{key:"render",value:function(){return r.a.createElement("div",{id:"scanner"},r.a.createElement("h1",null,"Market Scanner"),r.a.createElement("div",{className:"scanner-container"},r.a.createElement("div",{className:"scanner-header"},r.a.createElement("h2",null,"My Scanners"),r.a.createElement("div",{className:"add-scanner-btn",onClick:this.renderModal},"Add Scanner",r.a.createElement("span",{style:{marginLeft:"5px"}},"+"))),r.a.createElement("hr",null),r.a.createElement("table",{className:"scanner-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Elements"),r.a.createElement("th",null,"Rarity"),r.a.createElement("th",null,"Mana"),r.a.createElement("th",null,"Price range"),r.a.createElement("th",null,"Alert"))),r.a.createElement("tbody",null,this.state.scanners.map((function(e){return r.a.createElement("tr",null,r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.elements.map((function(t){return e.elements.indexOf(t)!==e.elements.length-1?t+", ":t}))),r.a.createElement("td",null,e.rarity.map((function(t){return e.rarity.indexOf(t)!==e.rarity.length-1?t+", ":t}))),r.a.createElement("td",null,0===e.manaMin&&10===e.manaMax?"All":0===e.manaMin?"< "+e.manaMax:10===e.manaMax?"> "+e.manaMin:e.manaMin+" - "+e.manaMax),r.a.createElement("td",null,0===e.priceMin&&1e5===e.priceMax?"Any":0===e.priceMin?"< "+e.priceMax.toLocaleString()+" DEC":1e5===e.priceMax?"> "+e.priceMin.toLocaleString()+" DEC":e.priceMin.toLocaleString()+" - "+e.priceMax.toLocaleString()+" DEC"),r.a.createElement("td",null,r.a.createElement("strong",null,e.alert,"%")," below market price"))}))))),this.state.renderModal?r.a.createElement(A,{closeModal:this.closeModal,addScanner:this.addScanner}):r.a.createElement("div",null))}}]),a}(r.a.Component),R=(a(28),a(29),{gold:["Show Gold Cards"],type:["Monster","Summoner"],rarity:["Common","Rare","Epic","Legendary"],edition:["Alpha","Beta","Promo","Reward","Untamed"],element:["Fire","Water","Earth","Life","Death","Dragon","Neutral"]}),U=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={activeFilters:[]},n.getCategory=n.getCategory.bind(Object(o.a)(n)),n.handleSearchChange=n.handleSearchChange.bind(Object(o.a)(n)),n.clearFilters=n.clearFilters.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"getCategory",value:function(e){var t="";return Object.keys(R).map((function(a){R[a].includes(e)&&(t=a)})),t}},{key:"handleSearchChange",value:function(e){var t=e.target.value;this.props.updateFilters(t,"search")}},{key:"clearFilters",value:function(){this.setState({activeFilters:[]}),this.props.updateFilters(null,null,"clear")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.mobileFilters?"collection-filter-pane show-sidebar":"collection-filter-pane hide-sidebar"},r.a.createElement("div",{className:"exit-btn",onClick:this.props.hideMobileFilters},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("input",{className:"collection-filter-search",placeholder:"Search Cards",onChange:this.handleSearchChange}),r.a.createElement("h2",{className:"collection-filter-header"},"Filters"),r.a.createElement("div",{className:"collection-activeFilters-container"},this.state.activeFilters.map((function(t){return r.a.createElement("p",{className:"collection-activeFilter",onClick:function(){for(var a=e.state.activeFilters,n=0;n<a.length;n++)if(a[n]===t){a.splice(n,1),e.setState({activeFilters:a});break}e.props.updateFilters(t,e.getCategory(t),"remove")}},t," \u2a2f")}))),0!==this.state.activeFilters.length?r.a.createElement("p",{className:"collection-clearFilters",onClick:this.clearFilters},"Clear Filters"):"",Object.keys(R).map((function(t){return r.a.createElement("div",{className:"collection-filter-section"},r.a.createElement("h2",{className:"collection-filter-section-header"},t.toUpperCase()),R[t].map((function(a){var n=t+"-icon";return"rarity"===t?n+=" fas fa-circle "+a.toLowerCase():"element"===t?(n+=" "+a.toLowerCase()+" fas ",n+="Fire"===a?"fa-fire":"Water"===a?"fa-tint":"Earth"===a?"fa-leaf":"Life"===a?"fa-star-of-life":"Death"===a?"fa-skull":"Dragon"===a?"fa-dragon":"fa-dumbbell"):"gold"===t&&(n+=" fas fa-star"),r.a.createElement("p",{className:"collection-filter-selection",id:a,onClick:function(){var n=e.state.activeFilters;n.includes(a)||(n.push(a),e.setState({activeFilters:n}),e.props.updateFilters(a,t,"add"))}},r.a.createElement("i",{className:n},"edition"===t||"type"===t?a.substring(0,1).toUpperCase():""),a)})))})))}}]),a}(r.a.Component),H=(a(30),a(31),a(32),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"cardModal"},r.a.createElement("div",{className:"cardModal-overlay",onClick:this.props.closeModal}),r.a.createElement("div",{className:"cardModal-content"},r.a.createElement("div",{className:"cardModal-exit",onClick:this.props.closeModal},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement("h2",null,this.props.info.name)))}}]),a}(r.a.Component)),G=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={renderModal:!1},n.toggleModal=n.toggleModal.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"toggleModal",value:function(){console.log(this.props.info.name),this.setState({renderModal:!this.state.renderModal})}},{key:"render",value:function(){return r.a.createElement("div",{className:"card",id:this.props.info.distinctID},r.a.createElement("img",{className:"card-img",src:this.props.info.img}),this.props.info.count>1?r.a.createElement("div",{className:"card-qty"},this.props.info.count):"",this.state.renderModal?r.a.createElement(H,{info:this.props.info,closeModal:this.toggleModal}):r.a.createElement("div",null))}}]),a}(r.a.Component),W=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleSortChange=n.handleSortChange.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"handleSortChange",value:function(e){var t=e.target.value;this.props.updateSort(t)}},{key:"render",value:function(){return r.a.createElement("div",{className:"collectionList-container"},r.a.createElement("div",{className:"collectionList-sort-container"},r.a.createElement("p",{className:"collectionList-info"},r.a.createElement("span",{className:"collectionList-resultCount"},this.props.cards.length," Results"),r.a.createElement("span",{className:"collectionList-filterCount",onClick:this.props.showMobileFilters},0===this.props.filterCount?"Add Filters (0)":"Edit Filters ("+this.props.filterCount+")")),r.a.createElement("select",{className:"collectionList-sort-input",onChange:this.handleSortChange,defaultValue:"default"},r.a.createElement("option",{disabled:!0,value:"default"},"Sort By:"),r.a.createElement("option",{value:"az"},"Name: A - Z"),r.a.createElement("option",{value:"za"},"Name: Z - A"),r.a.createElement("option",{value:"manaAsc"},"Mana: Low - High"),r.a.createElement("option",{value:"manaDes"},"Mana: High - Low"))),r.a.createElement("div",{className:"collectionList"},this.props.loading?r.a.createElement("div",{className:"loader-container"},r.a.createElement("div",{className:"loader"})):0===this.props.cards.length?r.a.createElement("p",{className:"collection-noCards"},"No cards were found. Please update the filters."):this.props.cards.map((function(e){return r.a.createElement(G,{info:e})}))))}}]),a}(r.a.Component),q=[],z=[[20,60,160,360,760,1560,2560,4560,7560],[100,300,700,1500,2500,4500,8500],[250,750,1750,3750,7750],[1e3,3e3,7e3]],J=[[1,5,14,30,60,100,150,220,300,400],[1,5,14,25,40,60,85,115],[1,4,10,20,32,46],[1,3,6,11]],K=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={filters:{search:[""],gold:!1,type:[],rarity:[],edition:[],element:[]},filterCount:0,cards:[],mobileFilters:!1,loading:n.props.loggedIn},n.updateFilters=n.updateFilters.bind(Object(o.a)(n)),n.updateSort=n.updateSort.bind(Object(o.a)(n)),n.showMobileFilters=n.showMobileFilters.bind(Object(o.a)(n)),n.hideMobileFilters=n.hideMobileFilters.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"updateFilters",value:function(e,t,a){var n=this.state.filters,r=this.state.filterCount;if("search"===t)n.search[0]=e;else if("gold"===t)n.gold=!n.gold,r=n.gold?r+1:r-1;else if("add"===a)n[t].push(e),r++;else if("remove"===a){for(var l=0;l<n[t].length;l++)n[t][l]===e&&n[t].splice(l,1);r--}else n={search:[""],gold:!1,type:[],rarity:[],edition:[],element:[]},r=0;var s=[];q.map((function(e){var t=!0,a=!0,r=!0,l=!0,i=!0,c=!0,o=n.rarity,m=n.edition,d=n.element,u=n.search[0],h=n.gold,p=n.type;0===o.length||o.includes(e.rarity)||(t=!1),0===m.length||m.includes(e.edition)||(a=!1),0===d.length||d.includes(e.element)||(r=!1),0!==u.length&&-1===e.name.toLowerCase().indexOf(u.toLowerCase())&&(l=!1),h&&!e.gold&&(i=!1),0===p.length||p.includes(e.type)||(c=!1),t&&a&&r&&l&&i&&c&&s.push(e)})),this.setState({filters:n,filterCount:r,cards:s})}},{key:"updateSort",value:function(e){var t=this.state.cards;"az"===e?t.sort((function(e,t){return e.name<t.name?-1:1})):"za"===e?t.sort((function(e,t){return e.name<t.name?1:-1})):"manaAsc"===e?t.sort((function(e,t){return e.mana-t.mana})):"manaDes"===e&&t.sort((function(e,t){return t.mana-e.mana})),this.setState({cards:t})}},{key:"showMobileFilters",value:function(){this.setState({mobileFilters:!0})}},{key:"hideMobileFilters",value:function(){this.setState({mobileFilters:!1})}},{key:"componentDidMount",value:function(){if(this.props.loggedIn){var e=[],t=[];E.a.ajax({type:"GET",url:"https://game-api.splinterlands.io/cards/get_details",jsonpCallback:"testing",dataType:"json",success:function(a){E.a.ajax({type:"GET",url:"https://game-api.splinterlands.com/cards/collection/"+localStorage.getItem("username"),jsonpCallback:"testing",dataType:"json",success:function(n){for(var r=0;r<n.cards.length;++r){for(var l=n.cards[r].card_detail_id,s=a[l-1],i=n.cards[r].gold,c=0===n.cards[r].edition?"Alpha":1===n.cards[r].edition?"Beta":3===n.cards[r].edition?"Reward":4===n.cards[r].edition?"Untamed":"Promo",o=(i?"G":"C")+("Alpha"===c?"A":"Beta"===c?"B":"Reward"===c?"R":"Untamed"===c?"U":"P")+l,m=s.name,d=s.type,u=1===s.rarity?"Common":2===s.rarity?"Rare":3===s.rarity?"Epic":"Legendary",h="Red"===s.color?"Fire":"Blue"===s.color?"Water":"Green"===s.color?"Earth":"White"===s.color?"Life":"Black"===s.color?"Death":"Gold"===s.color?"Dragon":"Neutral",p=n.cards[r].xp,g=1,v="Untamed"===c||"Reward"===c&&l>=225?J:z,f="Untamed"===c||"Reward"===c&&l>=225?1:2,E=v[s.rarity-1].length-1;E>=0;E--)if(p>=v[s.rarity-1][E]){g=E+f;break}var b="https://d36mxiodymuqjm.cloudfront.net/cards_by_level/"+c.toLowerCase()+"/"+m.replace(" ","%20")+"_lv"+g;if(b+=i?"_gold.png":".png",t.includes(o))for(var y=0;y<e.length;y++){var C=e[y];if(C.distinctID===o){C.gold=C.gold||i,C.count+=1,C.lvlHigh=g>C.lvlHigh?g:C.lvlHigh,C.lvlCount[g-1]+=1,C.img="https://d36mxiodymuqjm.cloudfront.net/cards_by_level/"+c.toLowerCase()+"/"+m.replace(" ","%20")+"_lv"+C.lvlHigh,C.img+=C.gold?"_gold.png":".png",C.mana="Monster"===d?s.stats.mana[C.lvlHigh-1]||0:s.stats.mana,C.hp=s.stats.health[C.lvlHigh-1]+s.stats.armor[C.lvlHigh-1]||0,C.speed=s.stats.speed[C.lvlHigh-1]||0,e[y]=C;break}}else{for(var N=[],k=0;k<z[s.rarity-1].length+1;k++)N.push(0);N[g-1]+=1,e.push({name:m,rarity:u,edition:c,element:h,type:d,detailID:l,distinctID:o,gold:i,img:b,count:1,lvlHigh:g,lvlCount:N,mana:"Monster"===d?s.stats.mana[g-1]||0:s.stats.mana,hp:s.stats.health[g-1]+s.stats.armor[g-1]||0,speed:s.stats.speed[g-1]||0}),t.push(o)}}q=e,this.setState({cards:e,loading:!1})}.bind(this),error:function(e){console.log("There was an error retrieving your cards.")}})}.bind(this),error:function(e){console.log("There was an error retrieving the card details")}})}}},{key:"componentDidUpdate",value:function(e){if(this.props.loggedIn!==e.loggedIn)if(this.props.loggedIn){var t=[],a=[];E.a.ajax({type:"GET",url:"https://game-api.splinterlands.io/cards/get_details",jsonpCallback:"testing",dataType:"json",success:function(e){E.a.ajax({type:"GET",url:"https://game-api.splinterlands.com/cards/collection/"+localStorage.getItem("username"),jsonpCallback:"testing",dataType:"json",success:function(n){for(var r=0;r<n.cards.length;++r){for(var l=n.cards[r].card_detail_id,s=e[l-1],i=n.cards[r].gold,c=0===n.cards[r].edition?"Alpha":1===n.cards[r].edition?"Beta":3===n.cards[r].edition?"Reward":4===n.cards[r].edition?"Untamed":"Promo",o=(i?"G":"C")+("Alpha"===c?"A":"Beta"===c?"B":"Reward"===c?"R":"Untamed"===c?"U":"P")+l,m=s.name,d=s.type,u=1===s.rarity?"Common":2===s.rarity?"Rare":3===s.rarity?"Epic":"Legendary",h="Red"===s.color?"Fire":"Blue"===s.color?"Water":"Green"===s.color?"Earth":"White"===s.color?"Life":"Black"===s.color?"Death":"Gold"===s.color?"Dragon":"Neutral",p=n.cards[r].xp,g=1,v="Untamed"===c||"Reward"===c&&l>=225?J:z,f="Untamed"===c||"Reward"===c&&l>=225?1:2,E=v[s.rarity-1].length-1;E>=0;E--)if(p>=v[s.rarity-1][E]){g=E+f;break}var b="https://d36mxiodymuqjm.cloudfront.net/cards_by_level/"+c.toLowerCase()+"/"+m.replace(" ","%20")+"_lv"+g;if(b+=i?"_gold.png":".png",a.includes(o))for(var y=0;y<t.length;y++){var C=t[y];if(C.distinctID===o){C.gold=C.gold||i,C.count+=1,C.lvlHigh=g>C.lvlHigh?g:C.lvlHigh,C.lvlCount[g-1]+=1,C.img="https://d36mxiodymuqjm.cloudfront.net/cards_by_level/"+c.toLowerCase()+"/"+m.replace(" ","%20")+"_lv"+C.lvlHigh,C.img+=C.gold?"_gold.png":".png",C.mana="Monster"===d?s.stats.mana[C.lvlHigh-1]||0:s.stats.mana,C.hp=s.stats.health[C.lvlHigh-1]+s.stats.armor[C.lvlHigh-1]||0,C.speed=s.stats.speed[C.lvlHigh-1]||0,t[y]=C;break}}else{for(var N=[],k=0;k<z[s.rarity-1].length+1;k++)N.push(0);N[g-1]+=1,t.push({name:m,rarity:u,edition:c,element:h,type:d,detailID:l,distinctID:o,gold:i,img:b,count:1,lvlHigh:g,lvlCount:N,mana:"Monster"===d?s.stats.mana[g-1]||0:s.stats.mana,hp:s.stats.health[g-1]+s.stats.armor[g-1]||0,speed:s.stats.speed[g-1]||0}),a.push(o)}}q=t,this.setState({cards:t,loading:!1})}.bind(this),error:function(e){console.log("There was an error retrieving your cards.")}})}.bind(this),error:function(e){console.log("There was an error retrieving the card details")}})}else{q=[];this.setState({cards:[]})}}},{key:"render",value:function(){return r.a.createElement("div",{id:"collection"},r.a.createElement("div",{className:"collection-header"},r.a.createElement("h2",null,"My Collection"),r.a.createElement("hr",null)),r.a.createElement("div",{className:"collection-container"},r.a.createElement(U,{updateFilters:this.updateFilters,mobileFilters:this.state.mobileFilters,hideMobileFilters:this.hideMobileFilters}),this.props.loggedIn?r.a.createElement(W,{cards:this.state.cards,loading:this.state.loading,updateSort:this.updateSort,filterCount:this.state.filterCount,showMobileFilters:this.showMobileFilters}):r.a.createElement("div",{className:"collection-login-prompt"},"Please log in to see your cards.")))}}]),a}(r.a.Component);var X=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={page:"market",username:localStorage.getItem("username")||"",loggedIn:!!localStorage.getItem("username")},n.renderPage=n.renderPage.bind(Object(o.a)(n)),n.updatePage=n.updatePage.bind(Object(o.a)(n)),n.login=n.login.bind(Object(o.a)(n)),n}return Object(c.a)(a,[{key:"updatePage",value:function(e){this.setState({page:e})}},{key:"login",value:function(e){var t;t=""!==e,this.setState({username:e,loggedIn:t})}},{key:"renderPage",value:function(e){return"market"===e?r.a.createElement(O,null):"collection"===e?r.a.createElement(K,{loggedIn:this.state.loggedIn}):"packs"===e?r.a.createElement(I,null):"battlechain"===e?r.a.createElement(B,null):"scanner"===e?r.a.createElement(P,null):void 0}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(p,{active:this.state.page,updatePage:this.updatePage,login:this.login,loggedIn:this.state.loggedIn}),this.renderPage(this.state.page))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(X,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.bcea020a.chunk.js.map